/* eslint-disable @typescript-eslint/no-unused-vars */
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import type { Car } from "../pages/dashboard/cars/main/types";
import { Separator } from "../ui/separator";

interface Props {
  car: Car;
  open: boolean;
  onClose: () => void;
}

export default function CarDetailsDialog({ car, open, onClose }: Props) {
  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="w-[80%] overflow-y-auto max-h-[90vh]">
        <DialogHeader>
          <DialogTitle className="text-xl font-bold text-right">
            ุชูุงุตูู ุงูุณูุงุฑุฉ: {car.model_name_ar} ({car.model_name_en})
          </DialogTitle>
        </DialogHeader>

        <Tabs defaultValue="overview" className="mt-4" dir="rtl">
          <TabsList className="grid grid-cols-6 mb-6">
            <TabsTrigger value="overview">ุนุงู</TabsTrigger>
            <TabsTrigger value="specs">ุงูููุงุตูุงุช</TabsTrigger>
            <TabsTrigger value="features">ุงููููุฒุงุช</TabsTrigger>
            <TabsTrigger value="warranty">ุงูุถูุงู</TabsTrigger>
            <TabsTrigger value="media">ุงูุตูุฑ ูุงูููุฏูู</TabsTrigger>
            <TabsTrigger value="variants">ุงููุฆุงุช</TabsTrigger>
          </TabsList>

          <TabsContent value="overview" className="space-y-3">
            <div className="grid grid-cols-2 gap-4 text-sm">
              <p>
                <strong>ุงูุนูุงูุฉ:</strong>{" "}
                {typeof car.brand === "string" ? car.brand : car.brand?.name_ar}
              </p>
              <p>
                <strong>ุงููุฆุฉ:</strong> {car.category}
              </p>
              <p>
                <strong>ููุน ุงููููู:</strong> {car.body_type || "-"}
              </p>
              <p>
                <strong>ุจูุฏ ุงูููุดุฃ:</strong> {car.origin_country || "-"}
              </p>
              <p>
                <strong>ุจูุฏ ุงูุชุฌููุน:</strong> {car.assembly_country || "-"}
              </p>
              <p>
                <strong>ุงูุญุงูุฉ:</strong> {car.is_active ? "ููุนูุฉ" : "ุบูุฑ ููุนูุฉ"}
              </p>
              <p>
                <strong>ุณูุงุฑุฉ ูููุฒุฉ:</strong> {car.is_featured ? "ูุนู" : "ูุง"}
              </p>
              <p>
                <strong>ุนุฏุฏ ุงููุดุงูุฏุงุช:</strong> {car.views_count}
              </p>
              <p>
                <strong>ุชุงุฑูุฎ ุงูุฅูุดุงุก:</strong>{" "}
                {new Date(car.createdAt).toLocaleDateString("ar-EG")}
              </p>
              <p>
                <strong>ุขุฎุฑ ุชุญุฏูุซ:</strong>{" "}
                {new Date(car.updatedAt).toLocaleDateString("ar-EG")}
              </p>
            </div>

            <Separator />
            <div>
              <strong>ุงููุตู ุจุงูุนุฑุจูุฉ:</strong>
              <p className="text-muted-foreground">
                {car.description_ar || "ูุง ููุฌุฏ ูุตู"}
              </p>
            </div>
            <div>
              <strong>ุงููุตู ุจุงูุฅูุฌููุฒูุฉ:</strong>
              <p className="text-muted-foreground">
                {car.description_en || "No description"}
              </p>
            </div>

            <Separator />
            <div>
              <strong>Meta Title:</strong> {car.meta_title || "-"}
              <br />
              <strong>Meta Description:</strong> {car.meta_description || "-"}
              <br />
              <strong>Meta Keywords:</strong>{" "}
              {car.meta_keywords?.length ? car.meta_keywords.join(", ") : "-"}
            </div>
          </TabsContent>

          <TabsContent value="specs" className="space-y-6 text-sm">
            {car.specifications ? (
              <>
                <div>
                  <h4 className="font-semibold text-primary">โ๏ธ ุงููุญุฑู</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>ุงูููุน: {car.specifications.engine?.type || "-"}</p>
                    <p>
                      ุงูุณุนุฉ ุงููุชุฑูุฉ:{" "}
                      {car.specifications.engine?.displacement || "-"}
                    </p>
                    <p>
                      ุงูุฃุณุทูุงูุงุช: {car.specifications.engine?.cylinders || "-"}
                    </p>
                    <p>
                      ุงูููุฉ: {car.specifications.engine?.horsepower || "-"} ุญุตุงู
                    </p>
                    <p>
                      ุงูุนุฒู: {car.specifications.engine?.torque || "-"}{" "}
                      ูููุชู.ูุชุฑ
                    </p>
                    <p>
                      ูุธุงู ุงููููุฏ:{" "}
                      {car.specifications.engine?.fuel_system || "-"}
                    </p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">๐ ูุงูู ุงูุญุฑูุฉ</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>ุงูููุน: {car.specifications.transmission?.type || "-"}</p>
                    <p>
                      ุนุฏุฏ ุงูุณุฑุนุงุช:{" "}
                      {car.specifications.transmission?.gears || "-"}
                    </p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">๐ ุงูุฃุฏุงุก</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>
                      ุงูุณุฑุนุฉ ุงููุตูู:{" "}
                      {car.specifications.performance?.top_speed || "-"}
                    </p>
                    <p>
                      ุงูุชุณุงุฑุน 0-100 ูู/ุณ:{" "}
                      {car.specifications.performance?.acceleration_0_100 ||
                        "-"}
                    </p>
                    <p>
                      ุงุณุชููุงู ุงููููุฏ (ูุฏููุฉ):{" "}
                      {car.specifications.performance?.fuel_consumption?.city ||
                        "-"}
                    </p>
                    <p>
                      ุงุณุชููุงู ุงููููุฏ (ุทุฑู):{" "}
                      {car.specifications.performance?.fuel_consumption
                        ?.highway || "-"}
                    </p>
                    <p>
                      ุงุณุชููุงู ุงููููุฏ (ููู):{" "}
                      {car.specifications.performance?.fuel_consumption
                        ?.combined || "-"}
                    </p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">๐ ุงูุฃุจุนุงุฏ</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>ุงูุทูู: {car.specifications.dimensions?.length} ูู</p>
                    <p>ุงูุนุฑุถ: {car.specifications.dimensions?.width} ูู</p>
                    <p>ุงูุงุฑุชูุงุน: {car.specifications.dimensions?.height} ูู</p>
                    <p>
                      ูุงุนุฏุฉ ุงูุนุฌูุงุช: {car.specifications.dimensions?.wheelbase}{" "}
                      ูู
                    </p>
                    <p>
                      ุงูุฎููุต ุงูุฃุฑุถู:{" "}
                      {car.specifications.dimensions?.ground_clearance} ูู
                    </p>
                    <p>
                      ุณุนุฉ ุงูุดูุทุฉ:{" "}
                      {car.specifications.dimensions?.cargo_capacity} ูุชุฑ
                    </p>
                    <p>
                      ุณุนุฉ ุฎุฒุงู ุงููููุฏ:{" "}
                      {car.specifications.dimensions?.fuel_tank_capacity} ูุชุฑ
                    </p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">โ๏ธ ุงููุฒู</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>
                      ุงููุฒู ุงููุงุฑุบ: {car.specifications.weight?.curb_weight} ูุฌู
                    </p>
                    <p>
                      ุงููุฒู ุงูููู: {car.specifications.weight?.gross_weight} ูุฌู
                    </p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">๐ ุงูุนุฌูุงุช</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>ุงูููุงุณ: {car.specifications.wheels?.size}</p>
                    <p>ุงูููุน: {car.specifications.wheels?.type}</p>
                  </div>
                </div>

                <Separator />

                <div>
                  <h4 className="font-semibold text-primary">๐ ุงูุณุนุฉ</h4>
                  <div className="grid grid-cols-3 gap-2">
                    <p>ุนุฏุฏ ุงูููุงุนุฏ: {car.specifications.capacity?.seating}</p>
                    <p>ุนุฏุฏ ุงูุฃุจูุงุจ: {car.specifications.capacity?.doors}</p>
                  </div>
                </div>
              </>
            ) : (
              <p className="text-muted-foreground">ูุง ุชูุฌุฏ ุจูุงูุงุช ููุงุตูุงุช</p>
            )}
          </TabsContent>

          <TabsContent
            value="features"
            className="grid grid-cols-3 gap-3 text-sm"
          >
            {Object.entries({
              ...car.safety_features,
              ...car.comfort_features,
              ...car.technology_features,
              ...car.exterior_features,
            })
              .filter(([_, v]) => v)
              .map(([key]) => (
                <div key={key} className="flex items-center gap-2">
                  โ <span>{key.replace(/_/g, " ")}</span>
                </div>
              ))}
          </TabsContent>

          <TabsContent value="warranty" className="text-sm space-y-3">
            {car.warranty ? (
              <>
                <p>
                  <strong>ุนุฏุฏ ุงูุณููุงุช:</strong> {car.warranty.years || "-"}
                </p>
                <p>
                  <strong>ุนุฏุฏ ุงููููููุชุฑุงุช:</strong>{" "}
                  {car.warranty.kilometers || "-"}
                </p>
                <p>
                  <strong>ุงููุตู ุจุงูุนุฑุจูุฉ:</strong>{" "}
                  {car.warranty.description_ar || "-"}
                </p>
                <p>
                  <strong>ุงููุตู ุจุงูุฅูุฌููุฒูุฉ:</strong>{" "}
                  {car.warranty.description_en || "-"}
                </p>
              </>
            ) : (
              <p className="text-muted-foreground">ูุง ุชูุฌุฏ ุจูุงูุงุช ุถูุงู</p>
            )}
          </TabsContent>

          <TabsContent value="media" className="space-y-4">
            {car.video_url && (
              <div>
                <h4 className="font-semibold text-primary">๐ฅ ุงูููุฏูู</h4>
                <video
                  src={car.video_url}
                  controls
                  className="w-full rounded-lg"
                />
              </div>
            )}
            <div>
              <h4 className="font-semibold text-primary mb-2">๐ธ ุงูุตูุฑ</h4>
              <div className="grid grid-cols-3 gap-3">
                {car.images?.thumbnail && (
                  <img
                    src={car.images.thumbnail}
                    alt="Thumbnail"
                    className="rounded-lg w-full h-40 object-cover border"
                  />
                )}
                {car.images?.featured_image && (
                  <img
                    src={car.images.featured_image}
                    alt="Featured"
                    className="rounded-lg w-full h-40 object-cover border"
                  />
                )}
                {car.images?.exterior?.map((img, i) => (
                  <img
                    key={i}
                    src={img}
                    alt={`Exterior ${i}`}
                    className="rounded-lg w-full h-40 object-cover border"
                  />
                ))}
                {car.images?.interior?.map((img, i) => (
                  <img
                    key={i}
                    src={img}
                    alt={`Interior ${i}`}
                    className="rounded-lg w-full h-40 object-cover border"
                  />
                ))}
              </div>
            </div>
          </TabsContent>

          <TabsContent value="variants" className="space-y-4 text-sm">
            {car.variants?.length ? (
              car.variants.map((variant, i) => (
                <div key={i} className="border rounded-lg p-3">
                  <p>
                    <strong>ุงูุงุณู:</strong> {variant.name_ar} ({variant.name_en}
                    )
                  </p>
                  <p>
                    <strong>ุงูุณูุฉ:</strong> {variant.year}
                  </p>
                  <p>
                    <strong>ุงูุณุนุฑ:</strong> {variant.price || "ุบูุฑ ูุญุฏุฏ"}
                  </p>
                  {variant.price_range && (
                    <p>
                      <strong>ูุทุงู ุงูุณุนุฑ:</strong> ูู {variant.price_range.min}{" "}
                      ุฅูู {variant.price_range.max}
                    </p>
                  )}
                  <p>
                    <strong>ุงูุญุงูุฉ:</strong> {variant.availability}
                  </p>
                  {variant.features?.length ? (
                    <p>
                      <strong>ุงููููุฒุงุช:</strong> {variant.features.join(", ")}
                    </p>
                  ) : (
                    <p className="text-muted-foreground">ูุง ุชูุฌุฏ ูููุฒุงุช</p>
                  )}
                </div>
              ))
            ) : (
              <p className="text-muted-foreground">ูุง ุชูุฌุฏ ูุฆุงุช ุญุงููุงู</p>
            )}
          </TabsContent>
        </Tabs>
      </DialogContent>
    </Dialog>
  );
}
